@model guestACCESS.eCommerce.ProgramSource.ProgramEventSourceWithGroup

@using guestACCESS.ClientWeb
@using guestACCESS.WebCommon

@{
    ViewBag.Title = "Program Tariff";
    Layout = "~/Views/Shared/_LayoutCatalog.cshtml";

    var welcomeInfo = new guestACCESS.Kernel.TripManagement.Trip(Model.ProgramId);
    var hasVdo = !string.IsNullOrEmpty(welcomeInfo.Media.Video);
    var hasImage = !string.IsNullOrEmpty(welcomeInfo.Media.Image);
    var hasDesc = !string.IsNullOrEmpty(welcomeInfo.Media.HtmlDescription);
    var accessCode = (string)ViewData["AccessCode"];
    var orderId = (int)ViewData["orderId"];
    bool isPreviw = false;
    if (hasDesc || hasImage || hasVdo)
    {
        isPreviw = true;
    }



}
@section HeadContent {
    @*<link href="~/Content/plugins/Stripe-Donate/css/normalize.css" rel="stylesheet" />
        <link href="~/Content/plugins/Stripe-Donate/css/global.css" rel="stylesheet" />*@
    <link href="/Content/plugins/OwlCarousel/assets/owl.carousel.min.css" rel="stylesheet" />
    <link href="/Content/plugins/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet" />
    <link href="/Content/assets/jaunt2/css/drawer.css" rel="stylesheet">
    <link href="~/Content/plugins/intlTelInput/intlTelInput.css" rel="stylesheet" />
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        hotel-page:before, .package-page:before, .cruise-page:before, .car-page:before, .tour-page:before, .flight-page:before, .hotel-maps:before {
            background: none;
        }

        .modal-backdrop {
            background: transparent !important;
        }

        #welcome-pop iframe {
            width: 100%;
            height: 150px;
        }

        ul.event-options li .eoi-event {
            flex-basis: 30%;
        }

        ul.event-options li .eoi-date {
            flex-basis: 10%;
        }

        ul.event-options li .eoi-guest {
            flex-basis: 10%;
        }

        ul.event-options li .eoi-usd {
            flex-basis: 10%;
        }


        ul#iti-0__country-listbox {
            z-index: 99999;
        }

        /*#welcome-pop img.img-fluid.event-img-pop,
        #welcome-pop iframe {
            height: 200px;
        }*/

        .slider_area {
            /*max-width: 450px;
            margin: 0 auto;
            margin-top: 25px;*/
            max-width: 100%;
            margin: 0 auto;
            margin-bottom: 20px;
        }

        .owl-carousel .owl-item img {
            max-width: 100%;
            /*width: auto;*/
            border-radius: 0;
            object-fit: cover;
            border-radius: 8px 8px 0 0;
        }

        .welcome_modal .modal-content {
            border-radius: 8px;
            /*border-radius: 3px;*/
            border: 0 !important;
        }

        .welcome_modal .modal-body {
            /*padding: 3em 20px;*/
            padding: 3em 0;
            text-align: center;
            padding-top: 0;
            margin: 0;
        }

            .welcome_modal .modal-body h3 {
                margin: 0;
                text-transform: uppercase;
                margin-bottom: 1em;
                font-size: 21px;
                /*color: #2C57E4;*/
            }

            .welcome_modal .modal-body .desc {
                /*padding: 5px 0px;
            font-size: 90%;
            color: #505050;
            margin-bottom: 15px;*/
                margin: 25px 0;
                padding: 5px 30px;
                font-size: 90%;
                color: #505050;
            }

        .over_flow_label {
            overflow-y: auto;
            max-height: 450px;
        }

        .start_button .btn {
            /*display: block;
             max-width: 160px;
             height:45px;
             line-height:45px;
             padding:0;
             background: #2C57E4;
             border-color: #2C57E4;
             text-transform: uppercase;*/
            display: block;
            max-width: 300px;
            margin: 0 auto;
            border-color: #17a2b8;
            text-transform: uppercase;
            height: 50px;
            line-height: 50px;
            padding: 0;
            background: #005b7f;
        }

        .start_button {
            /*text-align: left;*/
            text-align: center;
            display: block;
        }

            .start_button .btn:hover,
            .start_button .btn:focus,
            .start_button .btn:active {
                /*background: #3257d2;*/
                background: #17a2b8;
            }

        .owl-carousel .owl-video-tn {
            background-size: cover;
            /* padding-bottom: 56.25%; */ /* 16:9 */
        }

        .owl-video-frame {
            position: relative;
            /* padding-bottom: 56.25%;*/ /* 16:9 */
            padding-top: 25px;
            height: 0;
        }

            .owl-video-frame iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }

        .owl-theme .owl-nav.disabled + .owl-dots {
            z-index: 9999;
            position: absolute;
            bottom: 0;
            left: 47%;
        }

        .owl-theme .owl-dots {
            text-align: left;
        }
        /*.owl-dots {
             text-align: left;
             margin-top: 7px;
         }
         .owl-dot {
            display: inline-block;
         }
         .owl-dot span {
             width: 11px;
             height: 11px;
             background-color: #ccc;
             border-radius: 50%;
             display: block;
             margin: 5px 3px;
         }*/
        /*.owl-dot.active span {
         background-color: #2C57E4;
         background-color: #000;
         }*/

        .item-video {
            max-height: 340px;
            height: 340px;
            /*height: 340px;*/
        }

        .owl-carousel .owl-item {
            max-height: 340px;
            overflow: hidden;
        }

        .owl-carousel .owl-video-wrapper {
            border-radius: 8px 8px 0 0;
        }

        .welcome_modal .modal-dialog.modal-lg {
            max-width: 800px;
        }
        /*.welcome_modal .modal-content {
            max-width: 830px;
            /*background: url(../../Content/assets/openToWeb/images/background.png);
            background-repeat: no-repeat;
            background-size: 100%;

        }*/
        .pdr-0 {
            padding-right: 0;
        }

        .mar0 {
            margin: 0;
        }

        @@media (min-width:768px) {
            /*.welcome_modal .modal-body{
                    min-height: 547px;
            }*/
            .item-video {
                height: 340px;
            }
        }
        /*@@media (max-width:769px){
            .modal-content {

            }

            .sm-second {
                order: 2;
            }
            .sm-first {
                order: 1;
            }

            .welcome_modal .modal-body {
                padding: 15px 15px;
            }

            .col-md-6.pdr-0.col-sm-12 {
                padding-left: 0;
            }

            .col-md-6.col-sm-12.sm-second {
                padding-left: 0;
                text-align: center;
            }

            .start_button .btn {
                margin: 0 auto;
            }

            .item {
                min-height: 200px;

            }
        }*/
        .btnHotelBook {
            background-color: #667e80;
            color: white;
        }

        div#chatDrawerflight {
            margin-top: 10%;
        }

        button.proceed-btn {
            margin-left: 50%;
            color: #fff;
            background-color: #ff9800;
            border-color: #ff9800;
            box-shadow: 0 2px 2px 0 rgba(255, 152, 0, 0.14), 0 3px 1px -2px rgba(255, 152, 0, 0.2), 0 1px 5px 0 rgba(255, 152, 0, 0.12);
        }

        .event-selected .package-name a {
            color: #111111;
            font-size: 30px;
            line-height: 32px;
            text-decoration: none;
            font-weight: 300;
            -webkit-transition: all 0.2s linear;
            -moz-transition: all 0.2s linear;
            -ms-transition: all 0.2s linear;
            -o-transition: all 0.2s linear;
        }

        .event-selected .package-item .package-text p {
            margin: 0;
            color: #666666;
            font-family: 'Open sans';
            font-size: 13px;
            line-height: 20px;
            font-style: italic;
            margin: 19px 0 10px;
        }

        .viewDetails {
            color: #fff;
            background-color: #ff9800;
            border-color: #ff9800;
            box-shadow: 0 2px 2px 0 rgba(255, 152, 0, 0.14), 0 3px 1px -2px rgba(255, 152, 0, 0.2), 0 1px 5px 0 rgba(255, 152, 0, 0.12);
            display: inline-block;
            color: white;
            width: 100%;
            text-align: center;
        }

        .v-sm {
            line-height: 40px;
            padding-left: 20px;
            padding-right: 20px;
            font-size: 12px;
        }

        span.select2-container.select2-container--default {
            z-index: 9999;
        }

        .countdown-timer {
            text-align: center;
            background: #082b41;
            font-family: sans-serif;
            font-weight: 100;
            color: #fff;
            max-width: 50%;
            margin: auto;
            padding: 4px;
            border-radius: 9px;
            margin-top: 90px;
        }

        @@media(min-width:769px) {
            .package-item .package-img.big_img {
                float: left;
                width: 415px;
                margin-right: 30px;
            }
        }

        .card-header a {
            color: #fff;
        }
    </style>

}
@section FootContent {

    <style>
        a.btn.btn-primary.btn-sm.right {
            /*color: #fff !important;*/
        }

        .pagination-footer .mar-b-15 {
            display: flex;
            align-items: center;

        }
       
        .stripPrice-box {
            width: 62px;
            border: 1px solid;
            padding: 16px;
            margin: 5px;
            cursor:pointer;
        }
        .selectPriceBox {
            border: 2px solid #9c27b0;
        }
        #doantionBoxModal .active {
            background-color: #9c27b0;
            color:white;
        }
        #doantionBoxModal .customAmountBox {
            width: 170px;
            margin-left: 73px;
        }
    </style>
    <script src="/Content/plugins/jQuery-cookie/jquery.cookie.js"></script>
    <script src="/Content/dist/js/paginationObject.js"></script>
    <script src="~/Content/plugins/intlTelInput/intlTelInput-jquery.min.js"></script>
    <script src="/Content/pageScripts/ec_PTE.js"></script>
    <script src="/Content/pageScripts/ec_Tariff.js"></script>
    <script src="/Content/pageScripts/ec_CartParticipant.js"></script>
    <script src="/Content/plugins/OwlCarousel/owl.carousel.min.js"></script>
    <script src="/Content/Fairmont/css/2015/Bootstrap/js/bootstrap.min.js"></script>
    <script src="/Content/proposal/js/popper.min.js"></script>
    @*<script src="/Content/proposal/js/jquery-3.3.1.slim.min.js"></script>*@
<script type="text/javascript">

  @{var tripInfo = Model.GetProgram(); }
        $(document).ready(function () {
            Tariff.ProgramId = parseInt('@Model.ProgramId');
            Tariff.RemoveUrl = "@Url.Action("Remove", "ShoppingCart")";
            Tariff.WelcomeUrl = "@Url.Action("Welcome", "Tariff")";
            Tariff.BookHotelUrl = "@Url.Action("BookHotel", "Tariff")";
            Tariff.ShoppingCartUrl = "@Url.Action("Index", "ShoppingCart")";
            Tariff.EventGroupUrl = "@Url.Action("EventGroup", "Tariff")";
            Tariff.checkOutUrl = "@Url.Action("Index", "Summary")";
            Tariff.discardChangeUrl = "@Url.Action("DiscardChange", "Summary")";
            Tariff.showQty = "@tripInfo.EnableOpenToWebPaxQuantity";
            Tariff.IsPreview = '@isPreviw';
            Tariff.Init();
            //Tariff.TryShowWelcome();
            Tariff.SetEventCount();


        });
        $('.owl-carousel').owlCarousel({
            items: 1,
            loop: true,
            video: true,
            lazyLoad: true,
            nav: false,
            center: true,
            margin: 0,
        });

        $('#hotelBooking').click(function () {
            $('#chatDrawerflight').removeClass('dds__drawer-open');
            var all = $('.dds__drawer');
            var active = all.filter('.dds__drawer-open');
            var length = active.length;
            if (active.length > 0) {
                $('#chatDrawer').removeClass('dds__drawer-open');
            } else {
                $('#chatDrawer').addClass('dds__drawer-open');
            }
        });
        $('#flightBooking').click(function () {
            $('#chatDrawer').removeClass('dds__drawer-open');

            var all = $('.dds__drawer');
            var active = all.filter('.dds__drawer-open');
            var length = active.length;
            if (active.length > 0) {
                $('#chatDrawerflight').removeClass('dds__drawer-open');
            } else {
                $('#chatDrawerflight').addClass('dds__drawer-open');
            }


        });

</script>

}


<style>
    span.select2-selection.select2-selection--single {
        border-bottom: none !important;
        border: solid 1px !important;
        border-color: #d2d6de !important;
    }

    .select2-container select2-container--default select2-container--open {
        z-index: 9999;
    }

    
   /** updated on sept 23 2021 **/
   #header{
    background-color: #000!important;
    }

    footer{
    padding: 0!important;
    }

    #footer-selection{
        margin-top: 5rem;
    }
    .cart-btn{
        color: #fff!important;
    }

    @@media only screen and (max-width: 767px){
    .main {
    margin-top: 1rem;
    background-color: #fff;
    }}


    @@media only screen and (min-width: 767px){
        .cart-btn-contain {
            font-size: 1.5rem;
            margin: 1rem;
            padding: 2.5rem .5rem;
            } }

</style>

@{
    var eventTypes = ViewData["EventTypes"] as Dictionary<int, guestACCESS.DataAccess.Entity.T_GASDataEventType>;
    var trip = Model.GetProgram();
    var dmcInfo = new guestACCESS.Kernel.DMCManagement.DMC(trip.DMCId);
    var options = DMCHelper.GetOptionByDmc(dmcInfo.ParentDMCId > 0 ? dmcInfo.ParentDMCId.Value : dmcInfo.DMCId);
    var companyProfile = guestACCESS.Kernel.DMCManagement.CompanyProfile.GetDMCProfile(trip.DMCId);
}
<div class="main">
    <div class="container">
        <div class="main-cn package-page bg-white clearfix">
            <div class="row">
                <!-- Hotel Right -->
                <div class="col-md-12">

                    <div class="step">
                        <!-- Step -->
                        <ul class="payment-step text-center clearfix">
                            <li class="step-select">
                                <span>1</span>
                                <p>Make Selections</p>
                            </li>
                            @* <li class="step-select">
                                                 <button type="button" id="btnShowWelcome" class="welcome-btn">
                                    <span class="fa fa-comments"></span>

                                </button>
                                <p> Welcome</p>
                                        </li>*@
                            <li class="step-select">
                                <span>2</span>
                                <p>Confirm</p>
                            </li>
                            <li class="step-select">
                                <span>3</span>
                                <p>Pay</p>
                            </li>
                        </ul>
                        <!-- ENd Step -->
                    </div>
                    <div class="text-right">
                        @if (orderId > 0)
                        {
                            if (!string.IsNullOrEmpty(accessCode))
                            {
                                <button style=" margin: 10px 5px 10px 0px" type="button" class="awe-btn awe-btn-1 awe-btn-small" onclick="location.href='@Url.Action("Index", "Dashboard", new { id = accessCode })'">Back to Dashboard </button>
                            }
                        }
                        @if (isPreviw)
                        {
                                <button style=" margin: 10px 5px 10px 0px" type="button" id="btnShowWelcome" class="awe-btn awe-btn-1 awe-btn-small">Registration Details</button>
                        }
                    </div>
                    @using (Html.BeginForm("Index", "Tariff", FormMethod.Post, new { id = "SearchForm" }))
                    { 
                        @Html.Hidden("programId", Model.ProgramId)
                        @Html.Hidden("orderId", Model.OrderId)
                        <section class="package-list">
                            <!-- Step -->
                            @*         <ul class="payment-step package-step text-center clearfix">
                                    <!-- class 'step-select' or 'step-part' -->
                                    <li class="step-part">
                                        <span><img src="/Content/assets/jaunt2/images/icon-step-hotel.png" alt=""></span>
                                        <p>Make Selections</p>
                                    </li>
                                    <li>
                                        <span><img src="/Content/assets/jaunt2/images/icon-step-bed.png" alt=""></span>
                                        <p>Confirm and Pay</p>
                                    </li>

                                </ul>*@
                            <div class="package-list-cn" id="list-container">
                                @Html.Partial("Options", Model)
                            </div>
                        </section>
                    }
                </div>
                <!-- End Hotel Right -->
                @Html.Hidden("BookCartDataId", (string)ViewBag.BookId)
            </div>

        </div>
    </div>

</div>


@section Additional {
    @*<script src="http://localhost:3783/Content/assets/jaunt2/js/library/jquery-ui.min.js"></script>*@

}


